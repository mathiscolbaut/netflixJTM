{% extends 'base.html.twig' %}

{% block title %}Hello DownloadController!{% endblock %}

{% block body %}
<link rel="stylesheet" href="{{ asset('build/css/bootstrap.min.css') }}">
<script src="{{ asset('build/js/bootstrap.bundle.min.js') }}"></script>

<style>
    .example-wrapper { margin: 1em auto; max-width: 800px; width: 95%; font: 18px/1.5 sans-serif; }
    .example-wrapper code { background: #F5F5F5; padding: 2px 6px; }
</style>

<br>

<div class="row justify-content-center">
    <div class="col-xl-10 col-xxl-9">
        <div class="card shadow">
            <div class="card-header d-flex flex-wrap justify-content-center align-items-center justify-content-sm-between gap-3">
                <h5 class="display-6 text-nowrap text-capitalize mb-0">Liste Choix</h5>
                <div class="input-group input-group-sm w-auto">
                    <form action="{{ path('app_refresh') }}" method="post">
                        <input class="form-control form-control-sm" type="text" name="search_title" />
                        <button class="btn btn-outline-primary btn-sm" type="submit">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                                <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.398h-.001c.03.04.062.078.098.115l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85a1.007 1.007 0 0 0-.115-.1zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z"/>
                            </svg>
                        </button>
                    </form>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Titre</th>
                                <th>Taille</th>
                                <th class="text-center">Téléchargement</th>
                            </tr>
                        </thead>
                        <tbody>
                        {% for torrent in torrentData %}
                            <tr>
                                <td class="text-truncate" style="max-width: 200px;">{{ torrent.name }}</td>
                                <td class="text-truncate" style="max-width: 200px;">{{ torrent.size | number_format(0, ',', ' ') }} octets</td>
                                <td>
                                    <form action="{{ path('app_downloadTorrent') }}" method="get">
                                        <input type="hidden" name="link" value="{{ torrent.download_url }}">
                                        <button type="submit" class="btn btn-primary">Télécharger</button>
                                    </form>
                                </td>
                            </tr>
                        {% else %}
                            <tr>
                                <td colspan="3" class="text-center">Aucun torrent trouvé</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="card-footer">
                <nav>
                    <ul class="pagination pagination-sm mb-0 justify-content-center">
                        <li class="page-item"><a class="page-link" aria-label="Previous" href="#"><span aria-hidden="true">«</span></a></li>
                        <li class="page-item"><a class="page-link" href="#">1</a></li>
                        <li class="page-item"><a class="page-link" href="#">2</a></li>
                        <li class="page-item"><a class="page-link" href="#">3</a></li>
                        <li class="page-item"><a class="page-link" aria-label="Next" href="#"><span aria-hidden="true">»</span></a></li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>

{% endblock %}